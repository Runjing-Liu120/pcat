

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Welcome to PCAT’s documentation! &mdash; PCAT 0.1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="PCAT 0.1 documentation" href="../index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../index.html" class="fa fa-home"> PCAT</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Welcome to PCAT&#8217;s documentation!</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#features">Features</a><ul>
<li><a class="reference internal" href="#transdimensionality">Transdimensionality</a></li>
<li><a class="reference internal" href="#hierarchical-priors">Hierarchical priors</a></li>
<li><a class="reference internal" href="#labeling-degeneracy">Labeling degeneracy</a></li>
<li><a class="reference internal" href="#proposal-optimization">Proposal optimization</a></li>
<li><a class="reference internal" href="#performance">Performance</a></li>
</ul>
</li>
<li><a class="reference internal" href="#input">Input</a><ul>
<li><a class="reference internal" href="#supplying-data">Supplying data</a></li>
<li><a class="reference internal" href="#specifying-the-model-and-placing-priors">Specifying the model and placing priors</a><ul>
<li><a class="reference internal" href="#distributions-of-element-features">Distributions of element features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generating-mock-data">Generating mock data</a></li>
<li><a class="reference internal" href="#selecting-the-initial-state">Selecting the initial state</a></li>
</ul>
</li>
<li><a class="reference internal" href="#output">Output</a><ul>
<li><a class="reference internal" href="#plots">Plots</a></li>
<li><a class="reference internal" href="#chain">Chain</a></li>
</ul>
</li>
<li><a class="reference internal" href="#diagnostics">Diagnostics</a><ul>
<li><a class="reference internal" href="#autocorrelation">Autocorrelation</a></li>
<li><a class="reference internal" href="#gelman-rubin-test">Gelman-Rubin test</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tutorial">Tutorial</a></li>
<li><a class="reference internal" href="#api">API</a></li>
<li><a class="reference internal" href="#garbage-collection">Garbage collection</a></li>
</ul>
</li>
</ul>
</div>
          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">PCAT</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>Welcome to PCAT&#8217;s documentation!</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/_site/index.rst.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="welcome-to-pcat-s-documentation">
<h1>Welcome to PCAT&#8217;s documentation!<a class="headerlink" href="#welcome-to-pcat-s-documentation" title="Permalink to this headline">¶</a></h1>
<p>When testing hypotheses or inferring their free parameters, a recurring problem is to compare models that contain a number of elements whose multiplicity is itself unknown. Therefore, given some data, it is desirable to be able to compare models with different numbers of parameters. One way of achieving this is to obtain a point estimate (usually the most likely point) in the parameter space of each model and, then, rely on some information criterion to penalize more complex models for excess degrees of freedom. Another way is to sample from the parameter space of each model and compare their Bayesian evidences. Yet another is to take samples from the union of these models using a set of transdimensional jumps across models. This is what the Probabilistic Cataloger (PCAT) is designed for.</p>
<p>PCAT is a hierarchical, transdimensional, Bayesian inference framework. It&#8217;s theoretical framework is introduced in <a class="reference external" href="https://arxiv.org/abs/1607.04637">Daylan, Portillo &amp; Finkbeiner (2016)</a>, accepted to ApJ. In astrophysical applications, given the output of a photon counting experiment, it can be used to sample from <strong>the catalog space</strong>. In a more general context, it can be used as a mixture sampler to infer the posterior distribution of a metamodel given some Poisson distributed data.</p>
<p>In what follows, we assume that <strong>the metamodel</strong> is the union of models with different dimensionality. All such models have a certain number of common, <strong>fixed-dimensional</strong> parameters. In addition, each model has a different number of <strong>elements</strong>. An element is a collection of parameters that only exist together, and characterize an entity in the model. Examples are:</p>
<ul class="simple">
<li>A light source such as a star or galaxy, in an astrophysical emission model,</li>
<li>A light deflecting dark matter subhalo in an gravitational lensing model,</li>
<li>A term in the polynomial used to perform linear regression,</li>
</ul>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="installation">
<span id="sectinst"></span><h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>To install PCAT you can use pip</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">pcat</span>
</pre></div>
</div>
<p>or download <a class="reference external" href="https://github.com/tdaylan/pcat/releases/">the latest release</a> and run</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
</div>
<div class="section" id="features">
<span id="sectinpt"></span><h2>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<p>Compared to mainstream Bayesian inference methods, PCAT has a series of desirable features. It</p>
<ul class="simple">
<li>samples from the space of catalogs given some observation, unlike conventional cataloging, which estimates the most likely catalog,</li>
<li>allows marginalization over all relevant nuisance parameters in the problem, including the dimensionality of the nuisance,</li>
<li>reveals potentially non-Gaussian within and across model covariances,</li>
<li>constrains element population characteristics via hierarchical priors,</li>
<li>is a Bayesian framework, because point estimates fail in nearly degenerate likelihood topologies,</li>
<li>implements Occam&#8217;s razor (model parsimony) through natural priors on the number of degrees of freedom,</li>
<li>strictly respects detailed across models,</li>
<li>does not discard information contained in low-significance <span class="math">\((&lt; 5 \sigma)\)</span> fluctuations in the observed dataset,</li>
<li>reduces to a deterministic cataloger when the labeling degeneracy is explicitly broken,</li>
<li>simultaneously infers the Point Spread Function (PSF) and the level of diffuse background.</li>
</ul>
<div class="section" id="transdimensionality">
<h3>Transdimensionality<a class="headerlink" href="#transdimensionality" title="Permalink to this headline">¶</a></h3>
<p>PCAT takes steps across models by proposing to add elements whose parameters are drawn from the prior, or to kill randomly chosen elements, while respecting detailed balance in the metamodel.</p>
</div>
<div class="section" id="hierarchical-priors">
<h3>Hierarchical priors<a class="headerlink" href="#hierarchical-priors" title="Permalink to this headline">¶</a></h3>
<p>When there are multiple model elements, each with a set of parameters, it is natural to put priors on the <strong>distribution</strong> of these parameters, as opposed to placing individual priors separately on each element parameter. This assumes that a certain type of parameter of all elements, are drawn from a single probability distribution. This is particularly useful when such a parameter is subject to inference, and individual elements can be marginalized over. This results in a hierarchical prior structure, where the prior is placed on the distribution of element parameters, i.e., <strong>hyperparameters</strong>, and the prior on the individual element parameters are made conditional on these hyperparameters.</p>
</div>
<div class="section" id="labeling-degeneracy">
<h3>Labeling degeneracy<a class="headerlink" href="#labeling-degeneracy" title="Permalink to this headline">¶</a></h3>
<p>Due to <strong>hairlessness</strong> of the elements, the likelihood function is invariant to their permutations in the parameter vector, i.e., exchanging the labels of two elements leaves the likelihood invariant. This fact has consequences for <strong>nonpersistent</strong> elements, which get born or killed at least once during an MCMC run. Because of label changes, the posterior of these parameters look the same, which makes them useless for inferring their properties. In order to constrain such elements, the degeneracy must be broken in postprocessing of the samples. Note that, if the sampling is continued sufficiently long, e.g., for a Hubble time, the posterior of all transdimensional parameters will eventually look similar.</p>
</div>
<div class="section" id="proposal-optimization">
<h3>Proposal optimization<a class="headerlink" href="#proposal-optimization" title="Permalink to this headline">¶</a></h3>
<p>Construction of an MCMC chain requires a choice of proposal scale, which must remain constant (or strictly decrease) during sampling in order to respect detailed balance. In transdimensional inference, the choice of proposal scale includes both within and across model jumps. PCAT chooses the proposal scale for a particular sampling problem based on an initial calculation of the Fisher information at the maximum likelihood solution, in the beginning of each run, yielding an estimate of the model covariance. The tighter a parameter is constrained, the smaller the proposal scale for that parameter becomes. This ensures that the acceptance ratio is around 25% and minimizes the autocorrelation time of the resulting chain.</p>
<p>PCAT takes heavy-tailed within-model steps in a space, where the prior is uniformly distributed.</p>
<p>In order to ensure that the chains start from a well mixed state, the first <code class="docutils literal"><span class="pre">numbburn</span></code> samples are discarded and the resulting chain is thinned by  a factor of <code class="docutils literal"><span class="pre">factthin</span></code>.</p>
</div>
<div class="section" id="performance">
<h3>Performance<a class="headerlink" href="#performance" title="Permalink to this headline">¶</a></h3>
<p>The above features are made possible by enlarging the hypothesis space so as to minimize mismodeling of the observed data. This is, however, at the expense of seriously slowing down inference.</p>
<p>PCAT alleviates the performance issues in two ways:</p>
<ul class="simple">
<li>Use of parallelism via bypassing Python&#8217;s Global Interpreter Lock (GIL) by employing independent processes as opposed to threads. The parent process spawns multiple, (almost) noninteracting processes, which collect samples in parallel and report back to the parent process, which aggregates and postprocesses the samples.</li>
<li>Locality approximation in the likelihood evaluation. The most time consuming part of the inference is the model evaluation, which can be prohibitively slow (for large datasets and many elements) if no approximations are made. PCAT assumes that the contribution of the elements to the model vanishes outside some circle around the element.</li>
</ul>
</div>
</div>
<div class="section" id="input">
<h2>Input<a class="headerlink" href="#input" title="Permalink to this headline">¶</a></h2>
<p>PCAT expects input data in the folder <code class="docutils literal"><span class="pre">pathbase/data/inpt/</span></code>. The typical inputs are the data and exposure data cubes, background template(s) (if applicable), element kernel template(s) and the PSF (if applicable).</p>
<div class="section" id="supplying-data">
<h3>Supplying data<a class="headerlink" href="#supplying-data" title="Permalink to this headline">¶</a></h3>
<p>Input dataset is provided through the <code class="docutils literal"><span class="pre">strgexprflux</span></code> argument. This should be the name of a FITS file (including the <code class="docutils literal"><span class="pre">.fits</span></code> extension), which contains a numpy array of dimension <span class="math">\(N_e \times N_{pix} \times N_{psf}\)</span>, where <span class="math">\(N_e\)</span> is the number of energy bins, <span class="math">\(N_{pix}\)</span> is the number of spatial pixels and <span class="math">\(N_{psf}\)</span> is the number of PSF classes. The units should be photons per cm <span class="math">\(^2\)</span> per seconds per GeV.</p>
<p>The exposure map is suppled via the <code class="docutils literal"><span class="pre">strgexpo</span></code> argument. This should be the name of a FITS file (including the <code class="docutils literal"><span class="pre">.fits</span></code> extension). The format should be the same as <code class="docutils literal"><span class="pre">strgexprflux</span></code>, whereas units should be cm <span class="math">\(^2\)</span> s.</p>
<p>Similarly, background templates can be provided via the <code class="docutils literal"><span class="pre">back</span></code> argument. <code class="docutils literal"><span class="pre">back</span></code> should be a list of FITS file names (including the <code class="docutils literal"><span class="pre">.fits</span></code> extension), whose format should be same as that of <code class="docutils literal"><span class="pre">strgexprflux</span></code>.</p>
</div>
<div class="section" id="specifying-the-model-and-placing-priors">
<h3>Specifying the model and placing priors<a class="headerlink" href="#specifying-the-model-and-placing-priors" title="Permalink to this headline">¶</a></h3>
<p>The prior structure of the model is set by the relevant arguments to <code class="docutils literal"><span class="pre">pcat.main.init()</span></code>. PCAT allows the following fixed dimensional parameters in each member of the metamodel:</p>
<ul>
<li><p class="first">Background prediction</p>
<blockquote>
<div><p>Given an observed count map, the number of counts in each pixel can be modeled as a Poisson realization of the total counts from a number of elements. In practice, however, this number can be prohibitively large, when there are many more <strong>faint</strong> elements compared to bright ones. Therefore, it is computationally more favorable to represent the overall contribution of faint elements (those that negligibly affect the likelihood) with <strong>background</strong> templates. PCAT allows a list of spatially and spectrally distinct background templates to be in the model simultaneously.</p>
</div></blockquote>
</li>
<li><p class="first">PSF</p>
<blockquote>
<div><p>PSF defines a how a delta function in the position space projects onto the observed count maps. When the elements are count sources, PCAT assumes that the projection of all elements to the count maps are characterized by the same PSF. PSF convolution of the model prediction is only applicable for applications, where the observed count map has been collected with an instrument with a finite PSF.</p>
</div></blockquote>
</li>
</ul>
<div class="section" id="distributions-of-element-features">
<h4>Distributions of element features<a class="headerlink" href="#distributions-of-element-features" title="Permalink to this headline">¶</a></h4>
<p>All features of elements are assumed to have been drawn from an underlying probability distribution, and cross-correlations between element features are assumed to be zero. The 1-point function of the element features are controlled by the function arguments to <code class="docutils literal"><span class="pre">pcat.main.init()</span></code>. Furthermore, elements are divided into <strong>populations</strong>, where each population admits its own set of hyperparameters. Therefore the input to these arguments should be a <code class="docutils literal"><span class="pre">list</span></code> of strings.</p>
<ul class="simple">
<li>Spatial distribution (<code class="docutils literal"><span class="pre">spatdisttype</span></code>)</li>
</ul>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">'unif'</span></code></li>
</ul>
<p>Both horizontal positions, <span class="math">\(\theta_1\)</span>, and vertical positions, <span class="math">\(\theta_2\)</span>, are uniformly distributed between <span class="math">\(-\theta_{max}\)</span> and <span class="math">\(\theta_{max}\)</span>, where <span class="math">\(2\theta_{max}\)</span> is the side of the square in which model elements can exist.</p>
<div class="math">
\[\begin{split}P(\theta_1) &amp;= \frac{1}{2\theta_{max}} \\
P(\theta_2) &amp;= \frac{1}{2\theta_{max}}\end{split}\]</div>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">'disc'</span></code></li>
</ul>
<p>Horizontal positions, <span class="math">\(\theta_1\)</span>, are assumed to be uniformly distributed, whereas the vertical positions, <span class="math">\(\theta_2\)</span>, are drawn from the exponential distribution.</p>
<div class="math">
\[\begin{split}P(\theta_1) &amp;= \frac{1}{2\theta_{max}} \\
P(\theta_2) &amp;= \frac{1}{\theta_{2s}} \exp \Bigg( -\frac{\theta_2}{\theta_{2s}}\Bigg)\end{split}\]</div>
<p>The scale of the exponential distribution, <span class="math">\(\theta_{2s}\)</span>, is a hyperparameter subject to inference and set by <code class="docutils literal"><span class="pre">bgaldistscal</span></code>.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">'gang'</span></code></li>
</ul>
<p>Radial positions, <span class="math">\(\theta_r\)</span>, are assumed to follow an exponential distribution with an angular scale, <span class="math">\(\theta_{rs}\)</span>, controlled by <code class="docutils literal"><span class="pre">gangdistscal</span></code>. The azimuthal positions, <span class="math">\(\phi\)</span>, are uniformly distributed.</p>
<div class="math">
\[\begin{split}P(\phi) &amp;= \frac{1}{2\pi} \\
P(\theta_r) &amp;= \frac{1}{\theta_{rs}} \exp \Bigg( -\frac{\theta_r}{\theta_{rs}}\Bigg)\end{split}\]</div>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">'gaus'</span></code></li>
</ul>
<p>The prior spatial distribution is the sum of a certain number of Gaussians and a spatially constant floor.</p>
<div class="math">
\[P(\theta_1, \theta_2) \propto \alpha_c + c \sum_k \exp \Bigg(-\frac{1}{2}\frac{(\theta_1 - \theta_k)^2}{\sigma_c^2}\Bigg) \exp \Bigg(-\frac{1}{2}\frac{(\theta_2 - \theta_k)^2}{\sigma_c^2}\Bigg)\]</div>
<p><span class="math">\(c\)</span> is a normalizing constant that brings the maximum of the second term to unity. The amplitude of the floor, <span class="math">\(\alpha_c\)</span>, is set by the hyperparameter <code class="docutils literal"><span class="pre">spatdistcons</span></code>. It roughly parametrizes the degree of belief in the provided catalog. This spatial model is useful is there is a strong prior belief that elements exist at certain locations. An example is searching for elements at the positions of a earlier (deterministic) catalog.</p>
<ul class="simple">
<li>Flux distribution (<code class="docutils literal"><span class="pre">fluxdisttype</span></code>)</li>
</ul>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">'powr'</span></code></li>
</ul>
<p>Power law between <code class="docutils literal"><span class="pre">minmflux</span></code> and <code class="docutils literal"><span class="pre">maxmflux</span></code> with the slope <code class="docutils literal"><span class="pre">fluxdistslop</span></code>.</p>
<ul class="simple">
<li>Spectral index distribution</li>
</ul>
<p>Spectral index distribution of elements can be set with the argument <code class="docutils literal"><span class="pre">sinddisttype</span></code>.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">'atan'</span></code></li>
</ul>
<p>Spectral indices <span class="math">\(s_a\)</span> are distributed such that <span class="math">\(\arctan(s_a)\)</span> follow the uniform distribution between <span class="math">\(\arctan(s_{min})\)</span> and <span class="math">\(\arctan(s_{max})\)</span>. <span class="math">\(s_{min}\)</span> and <span class="math">\(s_{max}\)</span> can be set by <code class="docutils literal"><span class="pre">minmsind</span></code> and <code class="docutils literal"><span class="pre">maxmflux</span></code>, respectively.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">'gaus'</span></code></li>
</ul>
<p>Spectral indices <span class="math">\(s_a\)</span> follow a Gaussian distribution with mean <span class="math">\(\lambda_s\)</span> and variance <span class="math">\(\sigma_s^2\)</span>.</p>
</div>
</div>
<div class="section" id="generating-mock-data">
<h3>Generating mock data<a class="headerlink" href="#generating-mock-data" title="Permalink to this headline">¶</a></h3>
<p>PCAT ships with a mock (simulated) data generator. Mock data is randomly drawn from a generative metamodel, not to be confused with the metamodel subject to inference, (hereafter, <strong>the fitting metamodel</strong>). Once the user configures the prior probability density of the fitting metamodel, PCAT samples from this metamodel given the simulated dataset. Some of the generative metamodel parameters can be fixed, i.e., assigned delta function priors. These are</p>
<ul class="simple">
<li>the number of mock elements, <code class="docutils literal"><span class="pre">truenumbpnts</span></code>,</li>
<li>hyperparameters controlling the population characteristics of these elements.</li>
</ul>
<p>All other generative metamodel parameters are fair draws from the hierarchical prior.</p>
<p>When working on variations of a certain problem or different analyses on the same dataset, it is useful to have default priors. PCAT allows unique defaults for different built-in experiments, controlled by the argument <code class="docutils literal"><span class="pre">exprtype</span></code>. Currently the built-in experimental types are</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">ferm</span></code>: Fermi-LAT (Default)</li>
<li><code class="docutils literal"><span class="pre">chan</span></code>: Chandra</li>
<li><code class="docutils literal"><span class="pre">hubb</span></code>: Hubble Space Telescope</li>
<li><code class="docutils literal"><span class="pre">sdss</span></code>: SDSS</li>
<li><code class="docutils literal"><span class="pre">gaia</span></code>: Gaia</li>
</ul>
<p>By setting <code class="docutils literal"><span class="pre">exprtype</span></code> the user imposes the default prior structure for the chosen experimental type. However, it is also desirable to be able to change the prior of a specific parameter. This is accomplished by setting the <a class="reference internal" href="../index.html#sectoutp"><span class="std std-ref">relevant argument(s)</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">PCAT has a built-in fudicial (default) generative metamodel for each experiment type. The user can change parts of this model by providing arguments with the parameter names with a preceeding string <code class="docutils literal"><span class="pre">'true'</span></code> (indicating the fudicial model). The model subject to inference defaults to the resulting fudicial model. The user can also change parts of the fitting metamodel by setting arguments with the relevant parameter names (this time, without <code class="docutils literal"><span class="pre">'true'</span></code>, indicating the fitting metamodel). In other words, if the user does not specify any parameters, the fudicial model will be used to generate data, and the same model will be fitted to the data. In most cases, however, one is be interested in studying mismodeling, i.e., when the mock data is generated from a model different from that used to fit the data. This can be achieved by forcing the prior structure of the fitting metamodel to be different from the generator model.</p>
</div>
</div>
<div class="section" id="selecting-the-initial-state">
<h3>Selecting the initial state<a class="headerlink" href="#selecting-the-initial-state" title="Permalink to this headline">¶</a></h3>
<p>The initial state of the chain is drawn randomly from the prior.</p>
</div>
</div>
<div class="section" id="output">
<span id="sectoutp"></span><h2>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h2>
<p>A function call to <code class="docutils literal"><span class="pre">pcat.main.init()</span></code> returns the collected samples as well as postprocessed variables in an object that we will refer to as <code class="docutils literal"><span class="pre">gdat</span></code>. Any output (as well as many internal variables of the sampler) can be accessed via the attributes of this global object.</p>
<p>Furthermore, PCAT offers extensive routines to visualize the output chain. The output plots are placed in the relevant subfolders <code class="docutils literal"><span class="pre">pathbase/data/outp/rtag</span></code> and <code class="docutils literal"><span class="pre">pathbase/imag/rtag</span></code>, respectively, where <code class="docutils literal"><span class="pre">rtag</span></code> is the run tag. The <code class="docutils literal"><span class="pre">pathbase</span></code> folder is created if it does not already exist. It defaults to the value of the environment variable <code class="docutils literal"><span class="pre">$PCAT_DATA_PATH</span></code>. Therefore <code class="docutils literal"><span class="pre">pathbase</span></code> can be omitted by setting the environment variable <code class="docutils literal"><span class="pre">$PCAT_DATA_PATH</span></code>.</p>
<div class="section" id="plots">
<span id="sectplot"></span><h3>Plots<a class="headerlink" href="#plots" title="Permalink to this headline">¶</a></h3>
<p>If not explicitly disabled by the user, PCAT produces plots in every stage of a run. Some plots are produced in the initial setup, frame plots are generated at predetermined times during the sampling and others are made in the postprocessing after all chains have run. The plot path, <code class="docutils literal"><span class="pre">pathbase/imag/rtag</span></code>, has the following structure:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">init</span></code> Problem setup</li>
<li><code class="docutils literal"><span class="pre">prio</span></code> Plots regarding the sampling of the prior</li>
<li><code class="docutils literal"><span class="pre">post</span></code> Plots regarding the sampling of the posterior</li>
<li><code class="docutils literal"><span class="pre">info</span></code> Information gain</li>
</ul>
<blockquote id="note">
<div><p>Note that running the sampler on the prior probability distribution is optional and serves two purposes:</p>
<ul class="simple">
<li>diagnostic check that the imposed prior makes sense</li>
<li>to calculate the KL divergence on all metamodel parameters and derived quantities</li>
</ul>
</div></blockquote>
<p>In turn, each of <code class="docutils literal"><span class="pre">prio</span></code> and <code class="docutils literal"><span class="pre">post</span></code> contain the following folders:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">opti</span></code> Proposal scale optimization</li>
<li><code class="docutils literal"><span class="pre">fram</span></code> Frame plots, giving snapshots of the MCMC state</li>
<li><code class="docutils literal"><span class="pre">finl</span></code> Posterior distribution of model parameters and derived quantities</li>
<li><code class="docutils literal"><span class="pre">anim</span></code> GIF animations made from the frame plots in <code class="docutils literal"><span class="pre">fram</span></code> that are produced during sampling.</li>
<li><code class="docutils literal"><span class="pre">diag</span></code> Diagnostic plots</li>
</ul>
</div>
<div class="section" id="chain">
<span id="sectchan"></span><h3>Chain<a class="headerlink" href="#chain" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">pcat.main.init()</span></code> returns a pointer to the object that contains the output chain. It also writes the output chain to <code class="docutils literal"><span class="pre">$PCAT_DATA_PATH/outp/rtag/pcat.h5</span></code>, which is an HDF5 file. Each dataset (or object attribute as in the former case) is an <code class="docutils literal"><span class="pre">ndarray</span></code> of samples, either of the parameters or of quantities derived from the parameters, as well as diagnostic and utility variables.</p>
<p>In overall, the output folder contains the following files:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">args.txt</span></code></li>
</ul>
<p>The list of arguments to <code class="docutils literal"><span class="pre">pcat.main.init()</span></code>.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">pcat.h5</span></code></li>
</ul>
<p>HDF5 file containing samples from the hypothesis space, with the following fields:</p>
<p><code class="docutils literal"><span class="pre">sampvarb</span></code>       Parameter vector</p>
<p><code class="docutils literal"><span class="pre">samp</span></code>           Scaled parameter vector (uniformly distributed with respect to the prior)</p>
<p><code class="docutils literal"><span class="pre">deltllikpopl</span></code>   Delta loglikelihood of the <span class="math">\(l^{th}\)</span> population</p>
<p><code class="docutils literal"><span class="pre">lgalpopl</span></code>       Horizontal coordinates of the <span class="math">\(l^{th}\)</span> population</p>
<p><code class="docutils literal"><span class="pre">bgalpopl</span></code>       Vertical coordinates of the <span class="math">\(l^{th}\)</span> population</p>
<p><code class="docutils literal"><span class="pre">fluxpopl</span></code>       Flux of the <span class="math">\(l^{th}\)</span> population</p>
<p><code class="docutils literal"><span class="pre">sindpopl</span></code>       Spectral index of the <span class="math">\(l^{th}\)</span> population</p>
<p><code class="docutils literal"><span class="pre">curvpopl</span></code>       Spectral curvature of the <span class="math">\(l^{th}\)</span> population</p>
<p><code class="docutils literal"><span class="pre">expopopl</span></code>       Spectral cutoff energy of the <span class="math">\(l^{th}\)</span> population</p>
<p>In order to reduce inter-process communication, PCAT writes its internal state to the disc before child processes are spawned and after individual workers have finished their tasks. These intermediate files, in the form of python pickle objects, are temporarily written to the output folder, but deleted before the run ends.</p>
</div>
</div>
<div class="section" id="diagnostics">
<h2>Diagnostics<a class="headerlink" href="#diagnostics" title="Permalink to this headline">¶</a></h2>
<div class="section" id="autocorrelation">
<h3>Autocorrelation<a class="headerlink" href="#autocorrelation" title="Permalink to this headline">¶</a></h3>
<p>A chain of states needs to be Markovian (memoryless) in order to be interpreted as fair draws from a target probability density. The autocorrelation of the chain shows whether the chain is self-similar along the simulation time (either due to low acceptance rate or small step size). Therefore the autocorrelation plots should be monitored after each run.</p>
<p>In a transdimensional setting, the autocorrelation of a parameter is ill-defined, since parameters can be born, killed or change identity. Therefore, for such parameters, we calculate the autocorrelation of the model count map.</p>
<p>The acceptance rate of the birth and death moves shows whether the prior on the element parameters are appropriate. If the acceptance rate of birth and deaths proposals is too low, this indicates that an element randomly drawn from the prior is very unlikely to fit the data. In contrast, if it is too high, it means that most of the prior volume is insensitive to the data. Therefore the prior should be adjusted such that the birth and death acceptance rate is between <span class="math">\(\sim 5%% - \sim30%%\)</span>. This allows efficient jumps and minimizes autocorrelation across models.</p>
</div>
<div class="section" id="gelman-rubin-test">
<h3>Gelman-Rubin test<a class="headerlink" href="#gelman-rubin-test" title="Permalink to this headline">¶</a></h3>
<p>PCAT nominally runs multiple, noninteracting chains, whose samples are aggregated at the end. In order to ensure convergence, therefore, one can compare within-chain variance with across-chain variance. This is known as the Gelman-Rubin test. PCAT outputs the GR test statistics in <code class="docutils literal"><span class="pre">gdat.gmrb</span></code> and plots the relevant diagnostics in <code class="docutils literal"><span class="pre">$PCAT_DATA_PATH/imag/rtag/diag/</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Make sure to run PCAT with the argument <code class="docutils literal"><span class="pre">diagmode=False</span></code> for reasonable time performance. <code class="docutils literal"><span class="pre">diagmode=True</span></code> option puts the sampler in a conservative diagnostic mode and performs extensive checks on the state of critical data structures to ensure that the model and proposals are self consistent, largely slowing down execution.</p>
</div>
</div>
</div>
<div class="section" id="tutorial">
<h2>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h2>
<p>In this tutorial, we will illustrate how to run PCAT during a typical science analysis. Assuming that you have <a class="reference internal" href="../index.html#sectinst"><span class="std std-ref">installed</span></a> PCAT, let us run it on mock data.</p>
<p>All user interaction with PCAT can be performed through the <code class="docutils literal"><span class="pre">pcat.main.init()</span></code> function. Because arguments to this function have hierarchically defined defaults, even the default call (without arguments) starts a valid PCAT run. The default call generates mock Fermi-LAT data with an isotropic background and point source distribution and takes samples from the catalog space of the generated data. Therefore it assumes that you have the necessary Instrument Response Function (IRF) file as well as exposure, data and background flux files in <code class="docutils literal"><span class="pre">pathbase/data/inpt/</span></code>.</p>
<p>The default run collects a single chain of 100000 samples, discards the initial 20% of the samples and thins the remaining samples to obtain a chain of 1000 samples. The number of processes, total number of samples per process, the number of samples to be discarded and the factor by which to thin the chain can be set using the arguments <code class="docutils literal"><span class="pre">numbproc</span></code>, <code class="docutils literal"><span class="pre">numbswep</span></code>, <code class="docutils literal"><span class="pre">numbburn</span></code> and <code class="docutils literal"><span class="pre">factthin</span></code>, respectively. After initialization, PCAT collects samples, produces frame plots (snapshots of the sampler state during the execution) and postprocesses the samples at the end. The run should finish in under half an hour with the message</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>&gt;&gt; The ensemble of catalogs is at $PCAT_DATA_PATH/data/outp/rtag/
</pre></div>
</div>
<p>While the sampler is running, you can check <code class="docutils literal"><span class="pre">$PCAT_DATA_PATH/imag/rtag/</span></code> to inspect <a class="reference internal" href="../index.html#sectplot"><span class="std std-ref">the output plots</span></a>.</p>
<p>Although PCAT visualizes the ensemble of catalogs in various projections to the data and model spaces, the user can also work directly on <a class="reference internal" href="../index.html#sectchan"><span class="std std-ref">the output chain</span></a>.</p>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<p>All user interaction with PCAT is accomplished through the <code class="docutils literal"><span class="pre">pcat.main.init()</span></code> function. Below is a list of its function arguments.</p>
<dl class="function">
<dt id="pcat.main.init">
<code class="descclassname">pcat.main.</code><code class="descname">init</code><span class="sig-paren">(</span><em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#pcat.main.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an observed dataset, sample from the hypothesis space.</p>
<p><strong>Sampler settings</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>numbswep</strong> (<em>int</em>) &#8211; Number of samples to be taken by each process</li>
<li><strong>numbburn</strong> (<em>int</em>) &#8211; Number of samples to be discarded from the beginning of each chain</li>
<li><strong>factthin</strong> (<em>int</em>) &#8211; Factor by which to thin each chain. Only one sample out of <code class="docutils literal"><span class="pre">factthin</span></code> samples is saved.</li>
<li><strong>numbproc</strong> (<em>int</em>) &#8211; Number of processes. The total number of samples before thinning and burn-in, will be <code class="docutils literal"><span class="pre">numbproc</span></code> times <code class="docutils literal"><span class="pre">numbswep</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Input</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>indxenerincl</strong> (<em>ndarray int</em>) &#8211; Indices of energy bins to be taken into account. It is only effective if data is provided by the user, i.e., for non-simulation runs, where it defaults to all available energy bins. Other energy bins are discarded.</li>
<li><strong>indxevttincl</strong> (<em>ndarray int</em>) &#8211; Indices of PSF class bins to be taken into account. Works similar to <code class="docutils literal"><span class="pre">indxenerincl</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Output</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>verbtype</strong> (<em>int</em>) &#8211; <p>Verbosity level</p>
<ul>
<li><code class="docutils literal"><span class="pre">0</span></code> No standard output</li>
<li><code class="docutils literal"><span class="pre">1</span></code> Minimal standard output including status of progress (Default)</li>
<li><code class="docutils literal"><span class="pre">2</span></code> Diagnostic verbose standard output</li>
</ul>
</li>
<li><strong>pathbase</strong> (<em>str</em>) &#8211; Data path of PCAT. See <a class="reference internal" href="../index.html#sectoutp"><span class="std std-ref">Output</span></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Associations with the reference catalog</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>anglassc</strong> (<em>float</em>) &#8211; Radius of the circle within which sample catalog elements can be associated with the elements in the reference catalog.</li>
<li><strong>margfactcomp</strong> (<em>float</em>) &#8211; The ratio of the side of the square in which the sample elements are associated with the reference catalog, to the size of the image.</li>
<li><strong>nameexpr</strong> (<em>str</em>) &#8211; A string that describes the provided reference catalog to be shown in the plot legends.</li>
<li><strong>cntrpnts</strong> (<em>bool</em>) &#8211; Force the mock data to a single PS at the center of the image. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>General</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>elemtype</strong> (<em>str</em>) &#8211; <p>Functional type of elements.</p>
<ul>
<li><code class="docutils literal"><span class="pre">'lght'</span></code> Elements are light sources</li>
<li><code class="docutils literal"><span class="pre">'lens'</span></code> Elements are lenses.</li>
</ul>
</li>
<li><strong>evalcirc</strong> (<em>str</em>) &#8211; Flag to evaluate the likelihood only inside a circle of a certain radius around elements.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Initial state</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>randinit</strong> (<em>bool</em>) &#8211; Force the initial state to be randomly drawn from the prior. Default behavior for mock data is to initialize the chain with the true state.</td>
</tr>
</tbody>
</table>
<p><strong>Adaptivity</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>optiprop</strong> (<em>bool</em>) &#8211; Optimize the scale of each proposal by acceptance rate feedback. All samples during the tuning are discarded.</td>
</tr>
</tbody>
</table>
<p><strong>Post processing</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>strgexprflux</strong> (<em>str</em>) &#8211; Name of the FITS file (without the extension) in <code class="docutils literal"><span class="pre">pathdata</span></code> containing the observed data as an <code class="docutils literal"><span class="pre">ndarray</span></code>.</li>
<li><strong>strgcatl</strong> (<em>str</em>) &#8211; A descriptive name for the provided reference catalog to be shown in the plot legends.</li>
<li><strong>strgback</strong> (<em>list of str</em><em> or </em><em>int</em>) &#8211; A list of FITS file names (without the extension) in <code class="docutils literal"><span class="pre">pathdata</span></code> each containing a spatial template for the background prediction as an <code class="docutils literal"><span class="pre">ndarray</span></code>. See <code class="docutils literal"><span class="pre">strgexprflux</span></code> for the content of the file and its unit. One element of the list can be a float, indicating an isotropic template with the provided amplitude.</li>
<li><strong>lablback</strong> (<em>list of str</em>) &#8211; a list of axis labels for the spatial background templates to be shown in plots.</li>
<li><strong>strgexpo</strong> (<em>str</em><em> or </em><em>float</em>) &#8211; Name of the FITS file (without the extension) in <code class="docutils literal"><span class="pre">pathdata</span></code> containing the exposure map. See <code class="docutils literal"><span class="pre">strgexprflux</span></code> for the format of the numpy array. <code class="docutils literal"><span class="pre">strgexpo</span></code> can also be a float, in which case the exposure map will be assumed to be uniform across along all data dimensions.</li>
<li><strong>liketype</strong> (<em>strg</em>) &#8211; <p>Type of the likelihood.</p>
<ul>
<li><code class="docutils literal"><span class="pre">'pois'</span></code> Poisson probability of getting the observed number of counts given the model prediction (default).</li>
<li><code class="docutils literal"><span class="pre">'gaus'</span></code> Gaussian approximation of the above. This may accelerate the execution in cases, where the bottle neck of the sampler time budget is likelihood evaluation.</li>
</ul>
</li>
<li><strong>exprtype</strong> (<em>str</em>) &#8211; Name of the experiment used to collect the observed data. <code class="docutils literal"><span class="pre">exprtype</span></code> can be used to set other options to their default values for the particular experiment.
- <code class="docutils literal"><span class="pre">'ferm'</span></code> Fermi-LAT
- <code class="docutils literal"><span class="pre">'chan'</span></code> Chandra
- <code class="docutils literal"><span class="pre">'hubb'</span></code> HST
- <code class="docutils literal"><span class="pre">'sdss'</span></code> SDSS</li>
<li><strong>lgalcntr</strong> (<em>float</em>) &#8211; Galactic longitude of the image center. <code class="docutils literal"><span class="pre">lgalcntr</span></code> and <code class="docutils literal"><span class="pre">bgalcntr</span></code> are used to rotate the observed data, exposure and background maps as well as the provided reference catalog to the center of the ROI. They are only effective when pixelization is HealPix, i.e, <code class="docutils literal"><span class="pre">pixltype='heal'</span></code>.</li>
<li><strong>bgalcntr</strong> (<em>float</em>) &#8211; Galactic latitude of the image center. See <code class="docutils literal"><span class="pre">lgalcntr</span></code>.</li>
<li><strong>maxmangl</strong> (<em>float</em>) &#8211; Maximum angular separation at which PSF can be interpolated. It defaults to three times the diagonal legth of the image, enough to evaluate the PSF across the whole image.</li>
<li><strong>pixltype</strong> &#8211; <p>Type of the pixelization.</p>
<ul>
<li><code class="docutils literal"><span class="pre">heal</span></code> HealPix</li>
<li><code class="docutils literal"><span class="pre">chan</span></code> Cartesian</li>
</ul>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Plotting</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>makeplot</strong> (<em>bool</em>) &#8211; Make output plots, which is the default behavior. If <code class="docutils literal"><span class="pre">False</span></code>, no output plots are produced.</li>
<li><strong>numbswepplot</strong> (<em>int</em>) &#8211; Number of samples (before thinning and burn-in) for which one set of frame plots will be produced. Frame plots reveal individual samples in detail and are later used for producing animations.</li>
<li><strong>scalmaps</strong> (<em>str</em>) &#8211; <p>A string that sets the stretch of the count maps</p>
<ul>
<li><code class="docutils literal"><span class="pre">'asnh'</span></code> Arcsinh (default)</li>
<li><code class="docutils literal"><span class="pre">'self'</span></code> Linear</li>
<li><code class="docutils literal"><span class="pre">'logt'</span></code> Log 10</li>
</ul>
</li>
<li><strong>satumaps</strong> (<em>bool</em>) &#8211; Saturate the count maps</li>
<li><strong>exprinfo</strong> (<em>bool</em>) &#8211; Overplot the provided reference catalog on the output plots.</li>
<li><strong>makeanim</strong> (<em>bool</em>) &#8211; Make animations of the frame plots. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
<li><strong>anotcatl</strong> (<em>bool</em>) &#8211; Anotate the catalog members on the plots, if an annotation text is provided along with the reference catalog. (Default: <code class="docutils literal"><span class="pre">False</span></code>)</li>
<li><strong>strgbinsener</strong> (<em>str</em>) &#8211; A string holding the label for the energy axis.</li>
<li><strong>asscmetrtype</strong> (<em>str</em>) &#8211; Type of metric used to associate the sample catalogs with the reference catalog</li>
<li><strong>strgexprname</strong> (<em>str</em>) &#8211; A string describing the experiment used to collect the observed data.</li>
<li><strong>strganglunit</strong> (<em>str</em>) &#8211; Label for the spatial axes.</li>
<li><strong>labllgal</strong> (<em>str</em>) &#8211; Label for the horizontal axis</li>
<li><strong>lablbgal</strong> (<em>str</em>) &#8211; Label for the vertical axis</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Diagnostics</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>emptsamp</strong> (<em>bool</em>) &#8211; Perform a futile run without collecting any samples, but creating all data structures and producing all visualizations as if in a normal run. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>diagmode</strong> (<em>bool</em>) &#8211; Start the run in diagnostic mode. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Model</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>spatdisttype</strong> (<em>list of str</em>) &#8211; Type of spatial distribution of elements for each population</li>
<li><strong>fluxdisttype</strong> (<em>list of str</em>) &#8211; Type of flux distribution of elements for each population</li>
<li><strong>spectype</strong> (<em>list of str</em>) &#8211; Type of energy spectrum of elements for each population</li>
<li><strong>psfntype</strong> (<em>str</em>) &#8211; Type of PSF radial profile</li>
<li><strong>oaxitype</strong> (<em>str</em>) &#8211; Type of PSF off-axis profile</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The generative metamodel parameters can be set by preceeding the parameter name with <code class="docutils literal"><span class="pre">true</span></code>. For example, in order to set the mock number of elements, you can specify <code class="docutils literal"><span class="pre">truenumbpnts=array([10])</span></code>.</p>
</div>
</div>
<div class="section" id="garbage-collection">
<h2>Garbage collection<a class="headerlink" href="#garbage-collection" title="Permalink to this headline">¶</a></h2>
<p>PCAT produces two folders for the output of each run, one for plots and the other to contain the chain saved to the disc. Given that many test and intermediate runs may be needed before each science run, the number of folders (and files therein) may increase quickly. In order to avoid this, the script <code class="docutils literal"><span class="pre">gcol.py</span></code> is provided to the user as a convenience. When executed, it erases the output from all runs that</p>
<ul class="simple">
<li>have not run to completion, i.e., does not have the animations, which are produced at the very end, or</li>
<li>has collected less than 100000 samples per chain.</li>
</ul>
</div>
</div>


          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Tansu Daylan.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>